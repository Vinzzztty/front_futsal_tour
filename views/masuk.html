<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../public/styles/style.css" />
        <title>TURNAMENT FUTSAL</title>
    </head>

    <body>
        <h1 style="padding-top: 150px">Masuk</h1>
        <main>
            <form
                action="https://backend-futsal-tour-2.vercel.app/users/login"
                method="post"
            >
                <label for="email">ALAMAT EMAIL</label>
                <input type="email" id="email" name="email" required />

                <label for="password">KATA SANDI</label>
                <input type="password" id="password" name="password" required />

                <div class="button-container">
                    <button
                        type="button"
                        class="button"
                        style="margin-bottom: 260px"
                    >
                        MASUK
                    </button>
                </div>
            </form>

            <script>
                document
                    .querySelector("button")
                    .addEventListener("click", async function (event) {
                        const formData = {
                            email: document.getElementById("email").value,
                            password: document.getElementById("password").value,
                        };
                        const response = await fetch(
                            "https://backend-futsal-tour-2.vercel.app/api/users/login",
                            {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify(formData),
                            }
                        );
                        const result = await response.json();

                        // Check if the user is created successfully
                        if (response.ok) {
                            // Success popup
                            window.alert("User logged successfully!");
                            // Redirect to selamat.html
                            window.location.href = "selamat.html";
                        } else {
                            // Error popup
                            alert("Login failed. Invalid email or password.");
                        }
                    });
            </script>
        </main>

        <footer>
            <p>Copyright 2023</p>
        </footer>
    </body>
</html>
