<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="../public/styles/style.css" />
        <title>TURNAMENT FUTSAL</title>
    </head>

    <body>
        <h1>Daftar</h1>
        <main>
            <form
                id="daftar"
                action="https://backend-futsal-tour-2.vercel.app/api/users/register"
                method="post"
            >
                <label for="nama">NAMA</label>
                <input type="text" id="nama" name="nama" required />

                <label for="email">ALAMAT EMAIL</label>
                <input type="email" id="email" name="email" required />

                <label for="password">KATA SANDI</label>
                <input type="password" id="password" name="password" required />

                <label for="confirmPassword">ULANG KATA SANDI</label>
                <input
                    type="password"
                    id="confirmPassword"
                    name="confirmPassword"
                    required
                />

                <label for="noHp">NO HANDPHONE</label>
                <input type="number" name="noHp" id="noHp" required />

                <label for="tim">NAMA TIM</label>
                <input type="text" name="tim" id="tim" required />

                <div class="button-container">
                    <button
                        class="button"
                        type="button"
                        style="margin-bottom: 70px"
                    >
                        DAFTAR
                    </button>
                </div>
            </form>
            <script>
                document
                    .querySelector("button")
                    .addEventListener("click", async function (event) {
                        // event.preventDefault();

                        const formData = {
                            nama: document.getElementById("nama").value,
                            email: document.getElementById("email").value,
                            password: document.getElementById("password").value,
                            confirmPassword:
                                document.getElementById("confirmPassword")
                                    .value,
                            noHp: document.getElementById("noHp").value,
                            tim: document.getElementById("tim").value,
                        };
                        const response = await fetch(
                            "https://backend-futsal-tour-2.vercel.app/api/users/register",
                            {
                                method: "POST",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                                body: JSON.stringify(formData),
                            }
                        );

                        const result = await response.json();

                        // Check if the user is created successfully
                        if (response.ok) {
                            // Success popup
                            window.alert("User created successfully!");
                            // Redirect to selamat.html
                            window.location.href = "selamat.html";
                        } else {
                            // Error popup
                            window.alert(`Silahkan Isi Semua Form!`);
                        }
                    });
            </script>
        </main>

        <footer>
            <p>Copyright 2023</p>
        </footer>
    </body>
</html>
